var Fantasma;(()=>{"use strict";var t={322:(t,e,s)=>{const{Resolver:i}=s(334),{Path:n}=s(101),r=s(806);class a{constructor(t,e){e={start:0,easing:"linear",unit:null,scale:1,...e},this.animation=t,this.unit=e.unit,this.easing=r[e.easing],this.scale=e.scale,this.realscale=this.animation.scale*this.scale,this.start=e.start*this.realscale,this.obj=e.obj,this.prop=Array.isArray(e.prop)?e.prop:[e.prop],e.path=Array.isArray(e.path)?e.path:[e.path],this.parts=e.path,this.path=new n(0,this.realscale,...this.parts),this.totalTime=this.start+this.path.totalTime}init(){const t=this.animation.calcT(this.start),e=this.animation.calcT(this.totalTime);this.startT=t[1],this.endT=e[1],this.deltaT=this.endT-this.startT}calcT(t){return t=(t-this.startT)/this.deltaT,t=Math.min(1,Math.max(0,t)),this.easing(t)}}class o{constructor(t,e){this.abs=t,this.obj=e,this.res=new i(this.obj,...this.abs.prop),this.path=new n(this.res.initial,this.abs.realscale,...this.abs.parts)}set(t){t=this.abs.calcT(t);let e=this.path.getPosition(t);this.abs.unit&&(e=`${e}${this.abs.unit}`),this.res.val=e}}class h{constructor(t,e){const s=e.parent?e.parent.conf:{};this.conf={parent:null,before:null,after:null,beforeSkip:null,afterSkip:null,beforePause:null,afterPause:null,afterLoop:null,eachFrame:null,loop:0,reverse:!1,bounce:!1,els:{},...s,...e},this.parent=this.conf.parent,this.before=this.parent?null:this.conf.before,this.after=this.parent?null:this.conf.after,this.beforeSkip=this.parent?null:this.conf.beforeSkip,this.afterSkip=this.parent?null:this.conf.afterSkip,this.beforePause=this.parent?null:this.conf.beforePause,this.afterPause=this.parent?null:this.conf.afterPause,this.afterLoop=this.parent?null:this.conf.afterLoop,this.eachFrame=this.parent?null:this.conf.eachFrame,this.animation=t,this.loop=this.conf.loop,this.reverse=this.conf.reverse,this.bounce=this.conf.bounce,this.loops=0,this.rt=0,this.t=0,this.paused=!1,this.elapsed=null,this.lastf=null,this.els=this.conf.els,this.strips=this.animation.strips.map((t=>new o(t,this.els[t.obj]))),this.subplayers=[]}get bounceverse(){return!!this.bounce&&!!(this.loops%2)}get realverse(){return this.bounceverse!=this.reverse}get beginT(){return this.realverse?1:0}get endT(){return this.realverse?0:1}get beginMs(){return this.realverse?this.animation.totalTime:0}get endMs(){return this.realverse?0:this.animation.totalTime}get direction(){return this.realverse?-1:1}get firstLoop(){return 0==this.loops}get ended(){return this.realverse?this.rt<=0:this.rt>=1}set(t){for(let e=0;e<this.subplayers.length;e++)this.subplayers[e].set(t);for(let e=0;e<this.strips.length;e++)this.strips[e].set(t)}skip(t){this.beforeSkip&&this.beforeSkip(this),t=Math.min(1,Math.max(0,t)),this.elapsed=this.animation.totalTime*t,this.rt=t,this.t=this.animation.easing(t),this.lastf=Date.now(),this.set(this.t),this.pause(),this.afterSkip&&this.afterSkip(this)}frame(){if(this.paused)return;const t=Date.now(),e=t-this.lastf;this.elapsed+=e*this.direction,[this.rt,this.t]=this.animation.calcT(this.elapsed),this.set(this.t),this.lastf=t,this.eachFrame&&this.eachFrame(this),this.ended?(this.afterLoop&&this.afterLoop(this),this.loop<0||this.loops<this.loop?(this.loops++,this.play()):(this.after&&this.after(),this.loops=0,this.elapsed=null,this.lastf=null)):window.requestAnimationFrame((()=>this.frame()))}pause(){this.lastf&&(this.paused=Date.now(),this.beforePause&&this.beforePause())}play(){this.paused&&(this.lastf+=Date.now()-this.paused,this.paused=!1,this.afterPause&&this.afterPause()),(null===this.elapsed||this.ended)&&(this.elapsed=this.beginMs,this.firstLoop&&this.before&&this.before(),this.lastf=Date.now()),window.requestAnimationFrame((()=>this.frame()))}sub(t){const e=new h(this.animation,{...t,parent:this});return this.subplayers.push(e),e}}t.exports={AbstractStrip:a,RealStrip:o,Animation:class{constructor(t){t={easing:"linear",strips:[],scale:1,...t},this.easing=r[t.easing],this.scale=t.scale,this.totalTime=0,this.strips=t.strips.map((t=>(t=new a(this,t),this.totalTime=Math.max(this.totalTime,t.totalTime),t)));for(let t=0;t<this.strips.length;t++)this.strips[t].init()}calcT(t){const e=Math.min(1,Math.max(0,t/this.totalTime));return[e,this.easing(e)]}player(t={}){return new h(this,t)}},Playback:h}},806:t=>{const e=(t,e)=>1-t(1-e),s={linear:t=>t,easeInCubic:t=>Math.pow(t,3),easeOutCubic:t=>e(s.easeInCubic,t),easeInQuad:t=>t*t,easeOutQuad:t=>e(s.easeInQuad,t),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInSine:t=>1-Math.cos(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*x)-1)/2};t.exports=s},101:t=>{class e{constructor(t){if(t={from:null,speed:null,startval:null,easing:"linear",scale:1,...t},this.scale=t.scale,null!==t.from)this.from=t.from;else if(t.prev)this.from=t.prev.to;else{if(null===t.startval)throw new Error("initial segment has no initial value");this.from=t.startval}this.to=t.to,this.delta=Math.abs(this.from-this.to),t.speed&&(t.time=this.delta/t.speed*1e3),this.time=t.time*this.scale,this.sense=this.from<this.to?1:-1,this.startTime=t.prev?t.prev.endTime:0,this.endTime=this.startTime+this.time,this.easing=t.easing,this.timeShare=1,this.timeStop=1,this.prev=t.prev||null,this.next=null}get lastStop(){return this.prev?this.prev.timeStop:0}localTime(t){return 1!=t||this.next?(t-this.lastStop)/this.timeShare:t}}t.exports={Path:class{constructor(t,s,...i){let n,r;this.startval=t,this.scale=s,this.segments=[];for(let t=0;t<i.length;t+=1)n=this.segments[t-1],r=new e({...i[t],prev:n,startval:this.startval,scale:this.scale}),n&&(n.next=r),this.segments[t]=r;this.totalTime=this.segments[this.segments.length-1].endTime;for(let t=0;t<this.segments.length;t+=1)this.segments[t].timeShare=this.segments[t].time/this.totalTime,this.segments[t].timeStop=this.segments[t].endTime/this.totalTime;this.lastIndex=0,this.currentIndex=0,this.changedIndex=!1}getSegIndex(t){for(let e=0;e<this.segments.length;e+=1)if(t<=this.segments[e].timeStop)return e!=this.currentIndex?(this.lastIndex=this.currentIndex,this.currentIndex=e,this.changedIndex=!0):this.changedIndex&&(this.changedIndex=!1),e}getSegment(t){return this.segments[this.getSegIndex(t)]}getPosition(t){const e=this.getSegment(t);return e.from+e.sense*e.delta*e.localTime(t)}},Segment:e}},334:t=>{const e=t=>{let s,i=[];for(let n=0;n<t.length;n+=1)s=t[n],Array.isArray(s)?i=i.concat(e(s)):i.push(s);return i};t.exports={Resolver:class{constructor(t,...e){this.obj=t,this.prop=e,this.initial=this.val}resolve(){let t=this.obj;for(let e=0;e<this.prop.length;e++){if(!this.prop[e+1])return[t,this.prop[e]];t=t[this.prop[e]]}}get val(){const[t,e]=this.resolve();return t[e]}set val(t){const[e,s]=this.resolve();return e[s]=t}},flat:e}},556:t=>{const e="div h1 h2 h3 h4 h5 h6 span\na article aside br details header hgroup hr footer nav p section summary\nbutton datalist fieldset form input keygen label legend meter optgroup option\nselect textarea abbr accronym address b bdi bdo big blockquote cite code del\ndfn em i ins kbd mark output pre progress q rp rt ruby s samp small strike\nstrong sub sup tt u var wbr dd dir dl dt li ol menu ul caption col colgroup\ntable tbody td tfoot thead th tr noscript script area audio canvas embed\nfigcaption figure frame frameset iframe img image map noframes object param source\ntime video",s="svg g line";function i(t,e,s,i){let n;if(n=Array.isArray(t)?document.createElementNS(t[0],t[1]):document.createElement(t),"function"==typeof e)i=e,e=null;else if("string"==typeof e){e=e?e.split(/\s+/):[];const s=[],i=[],r=[],a=[];if(e.forEach((t=>{"#"==t[0]?s.push(t.slice(1)):"$"==t[0]?i.push(t.slice(1)):"@"==t[0]?r.push(t.slice(1)):a.push(t)})),s.length>1)throw"Error: multiple IDs specified";if(i.length>1)throw"Error: multiple anchor IDs specified";if(r.length>1)throw"Error: multiple anchors specified";if(r.length&&i.length)throw"Error: multiple anchors specified";if(s.length&&i.length)throw"Error: multiple IDs specified";let o=i[0]||s[0],h=!!a.length&&a;i[0]&&(i[0]=i[0].replace(/-([a-z])/g,(t=>t[1].toUpperCase())));let l=i[0]||r[0];o&&(n.id=o),h&&n.classList.add(...h),l&&n.setAttribute("anchor",l),"input"==t&&o&&n.setAttribute("name",o)}else if("object"==typeof e){const t=Object.keys(e);let s;for(let i=0;i<t.length;i++)s=t[i],n.setAttribute(s,e[s])}if("function"==typeof s)i=s,s=null;else if("object"==typeof s){const t=Object.keys(s);let e;for(let i=0;i<t.length;i++)e=t[i],n.setAttribute(e,s[e])}const r=a();return i&&i.call(r,r),r.els.forEach((t=>n.append(t))),n}function n(t,e,...s){const i=t(...s);return e.push(i),i}const r={text:function(...t){return function(t){return document.createTextNode(t)}(...t)}};function a(){const t={els:[],mkel:function(...e){return n(i,t.els,...e)}};return Object.keys(r).forEach((e=>{t[e]=function(...s){return n(r[e],t.els,...s)}})),t}e.split(/\s+/).forEach((t=>{r[t]=function(e,s,n){return i(t,e,s,n)}})),s.split(/\s+/).forEach((t=>{r[t]=function(e,s,n){return i(["http://www.w3.org/2000/svg",t],e,s,n)}}));const o={start:function(t,e){const s={};"function"==typeof t&&(e=t,t=document.body);const i=a();return e&&e.call(i,i),i.els.forEach((e=>{e.hasAttribute("anchor")&&(s[e.getAttribute("anchor")]=e),e.querySelectorAll("[anchor]").forEach((t=>{s[t.getAttribute("anchor")]=t})),t.append(e)})),s},mkel:i};e.split(/\s+/).forEach((t=>o[t]=r[t])),s.split(/\s+/).forEach((t=>o[t]=r[t])),t.exports=o},590:(t,e,s)=>{s.d(e,{A:()=>o});var i=s(354),n=s.n(i),r=s(314),a=s.n(r)()(n());a.push([t.id,"body{margin:0}#example-head{position:relative;width:710px;left:calc(50vw - 355px);font-weight:900;font-family:sans-serif;display:flex;justify-content:space-between;align-items:baseline}#example-head a{color:#191919;text-decoration:none}#example-head #title,#example-head #site{line-height:1.1em}#example-head #title{font-size:2em}#example-head #site{font-size:1.4em}#example-main{position:relative;width:700px;height:400px;left:calc(50vw - 355px);border:5px solid #191919}.square{width:100px;height:100px;background-color:#191919;position:absolute}#sq2{top:100px}#sq3{top:200px}#sq4{top:300px}","",{version:3,sources:["webpack://./examples/basic/example.scss"],names:[],mappings:"AASA,KACE,QAAA,CAGF,cACE,iBAAA,CACA,WAXG,CAYH,uBAAA,CACA,eAAA,CACA,sBAAA,CACA,YAAA,CACA,6BAAA,CACA,oBAAA,CACA,gBACE,aAvBI,CAwBJ,oBAAA,CAEF,yCACE,iBAAA,CAEF,qBACE,aAAA,CAEF,oBACE,eAAA,CAGJ,cACE,iBAAA,CACA,WArCM,CAsCN,YArCO,CAsCP,uBAAA,CACA,wBAAA,CAEF,QACE,WAtCI,CAuCJ,YAtCI,CAuCJ,wBA9CM,CA+CN,iBAAA,CAEF,KACE,SA3CI,CA6CN,KACE,SAAA,CAEF,KACE,SAAA",sourcesContent:["$black: #191919;\n$width: 700px;\n$height: 400px;\n$border: 5px;\n$fw: $width + $border * 2;\n$hw: calc($fw / 2);\n$sqx: 100px;\n$sqy: 100px;\n\nbody {\n  margin: 0;\n}\n\n#example-head {\n  position: relative;\n  width: $fw;\n  left: calc(50vw - $hw);\n  font-weight: 900;\n  font-family: sans-serif;\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  a {\n    color: $black;\n    text-decoration: none;\n  }\n  #title, #site {\n    line-height: 1.1em;\n  }\n  #title {\n    font-size: 2em;\n  }\n  #site {\n    font-size: 1.4em;\n  }\n}\n#example-main {\n  position: relative;\n  width: $width;\n  height: $height;\n  left: calc(50vw - $hw);\n  border: $border solid $black;\n}\n.square {\n  width: $sqx;\n  height: $sqy;\n  background-color: $black;\n  position: absolute;\n}\n#sq2 {\n  top: $sqy;\n}\n#sq3 {\n  top: $sqy * 2;\n}\n#sq4 {\n  top: $sqy * 3;\n}\n"],sourceRoot:""}]);const o=a},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",i=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),i&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),i&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,i,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var o=0;o<this.length;o++){var h=this[o][0];null!=h&&(a[h]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);i&&a[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),n&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=n):c[4]="".concat(n)),e.push(c))}},e}},354:t=>{t.exports=function(t){var e=t[1],s=t[3];if(!s)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),r="/*# ".concat(n," */");return[e].concat([r]).join("\n")}return[e].join("\n")}},427:(t,e,s)=>{s.r(e),s.d(e,{default:()=>g});var i=s(72),n=s.n(i),r=s(825),a=s.n(r),o=s(659),h=s.n(o),l=s(56),c=s.n(l),p=s(540),u=s.n(p),f=s(113),m=s.n(f),d=s(590),A={};A.styleTagTransform=m(),A.setAttributes=c(),A.insert=h().bind(null,"head"),A.domAPI=a(),A.insertStyleElement=u(),n()(d.A,A);const g=d.A&&d.A.locals?d.A.locals:void 0},72:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},a=[],o=0;o<t.length;o++){var h=t[o],l=i.base?h[0]+i.base:h[0],c=r[l]||0,p="".concat(l," ").concat(c);r[l]=c+1;var u=s(p),f={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==u)e[u].references++,e[u].updater(f);else{var m=n(f,i);i.byIndex=o,e.splice(o,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var o=s(r[a]);e[o].references--}for(var h=i(t,n),l=0;l<r.length;l++){var c=s(r[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=h}}},659:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,n&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,s),r.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nc=void 0,(()=>{s(427);const t=s(556),{Animation:e}=s(322),i=t.start((t=>{t.div("#example-head",(t=>{t.a("#title",{href:"https://github.com/0E9B061F/fantasma.js"},(t=>t.text("FANTASMA.JS"))),t.a("#site",{href:"https://0E9B061F.github.io"},(t=>t.text("0E9B061F.github.io")))})),t.div("#example-main smooth",(t=>{t.div("$sq1 square"),t.div("$sq2 square"),t.div("$sq3 square"),t.div("$sq4 square")}))}));new e({scale:3,easing:"easeOutQuad",strips:[{obj:"sq1",prop:["style","left"],unit:"px",path:[{from:100,to:600,time:500},{to:600,time:200},{to:300,time:300},{to:300,time:300},{to:500,time:400},{to:100,time:300}]},{obj:"sq2",prop:["style","left"],unit:"px",path:[{from:50,to:600,time:500},{to:600,time:200},{to:300,time:200},{to:300,time:300},{to:0,time:400},{to:50,time:300}]},{obj:"sq3",prop:["style","left"],unit:"px",path:[{from:500,to:0,time:500},{to:0,time:200},{to:300,time:300},{to:300,time:300},{to:450,time:400},{to:500,time:300}]},{obj:"sq4",prop:["style","left"],unit:"px",path:[{from:550,to:0,time:500},{to:0,time:200},{to:300,time:200},{to:300,time:300},{to:200,time:400},{to:550,time:300}]}]}).player({els:i,loop:-1}).play()})(),Fantasma={}})();
//# sourceMappingURL=fantasma.js.map